{% extends "layout.html" %}


{% block title %}
{% if 'category' in request.url  %}
Python{{ category.name }} | 编程派 | Practice Coding Python Everyday
{% else %} 编程派 | Practice Coding Python Everyday
{% endif %}
{% endblock title %}

{% block main %}

<div id="top">
    {% if 'category' in request.url  %}
        {% else %}{% include "includes/glide.html" %}
    {% endif %}

</div>

{# latest content #}
<div id="main">
   
    <div class="ui container stackable grid">

        <div class="articles eleven wide column">

            <div class="ui raised segment">

                <div class="ui pointing secondary menu brown section-title">
                    <div class="item active"><i class="feed icon"></i>最新文章</div>                 
                </div>

                {% if all_articles %}
                  <div class="js-infinite-layout">
                    {% include "includes/items.html" %}
                  </div>
                {% endif %}

            </div>

            <div class="ui center aligned js-infinite-navigation" style="text-align:center">
              
              <a href="{{ request.url }}/page/{{page + 1}}"></a>

            </div>
        </div>

        <aside id="related__wrapper" class="five wide column">
            {% include "includes/follow_us.html" %}

            <div class="ui sticky">

                {% include "includes/popular.html" %}


                {% include "includes/tags.html" %}

            </div>
        </aside>
    </div>

</div>

{# TODO: redesign index page #}
{% endblock%}

{% block scripts %}
    {{super()}}

    <script>


$('.box, .article-thumb').dimmer({
    on: 'hover',
    opacity: 0.7,
});

$('.avatar').popup();

// $('.ui.divider').last().remove();

$('.shape')
  .shape('flip up')
;

$('.ui.sticky')
  .sticky({

    context: '.articles'
  }).sticky('refresh')
;

$('#tab-nav .item').tab();

$('.js-infinite-layout').infinitescroll({
  loading: {
    finishedMsg: "<div style='text-align:center'><em>没有更多文章了~~</em></div>",
    img: "{{ url_for('static', filename='/images/rolling.svg') }}",
  },
  itemSelector: '.js-infinite-item',
  nextSelector: "div.js-infinite-navigation a:first",
  navSelector: "div.js-infinite-navigation",
});


</script>


{% endblock scripts %}

